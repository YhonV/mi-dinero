<ion-content>
  <div class="budget-wrapper">
    <!-- Header section with decorative elements -->
    <div class="header-container">
      <div class="header-decoration"></div>
      <div class="header-content">
        <h1 class="budget-title">Presupuesto</h1>
        <p class="budget-subtitle">Arma los presupuestos para tu mes üôÇ‚Äç‚ÜïÔ∏è</p>
      </div>
    </div>
    
    <!-- Add budget button - always visible -->
    <div class="action-card">
      <div class="action-card-content">
        <div class="action-icon">
          <ion-icon name="trending-up-outline"></ion-icon>
        </div>
        <div class="action-text">
          <h3>Gestiona tu presupuesto</h3>
          <p>Agrega categor√≠as y define l√≠mites de gastos</p>
        </div>
      </div>
      <ion-button class="add-budget-button" (click)="openModal()" *ngIf="budget.length !== 0">
        <ion-icon name="add-outline"></ion-icon>
        AGREGA NUEVO PRESUPUESTO
      </ion-button>
    </div>
    
    <!-- Loading indicator -->
    <div class="loading-container" *ngIf="isLoading">
      <div class="loading-spinner"></div>
      <p class="loading-text">Cargando tus presupuestos...</p>
    </div>
    
    <!-- Empty state with Nyan Cat -->
    <div class="empty-budget-container" *ngIf="!isLoading && budget.length === 0">
      <div class="nyan-cat-animation">
        <div class="nyan-cat">
          <div class="body"></div>
          <div class="head"></div>
          <div class="tail"></div>
          <div class="legs"></div>
          <div class="rainbow"></div>
        </div>
      </div>
      <h2 class="empty-title">¬°Wow, a√∫n no tienes presupuesto!</h2>
      <p class="empty-subtitle">Crea tu primer presupuesto para comenzar a administrar tus finanzas</p>
      <ion-button class="create-budget-button" (click)="openModal()">
        <ion-icon name="trending-up-outline"></ion-icon>
        Crea tu primer presupuesto
      </ion-button>
    </div>
    
    <!-- Budget content with more info -->
    <div class="budget-content" *ngIf="!isLoading && budget.length > 0">
      <div class="budget-header">
        <h2 class="section-title">Presupuestos actuales</h2>
        <div class="period-selector">
          <span class="period-label">Periodo:</span>
          <button class="period-button active">Mes actual</button>
          <button class="period-button">Personalizado</button>
        </div>
      </div>
      
      <!-- Chart container -->
      <div class="chart-container">
        <canvas #chartCanvas></canvas>
      </div>
      
      <!-- Budget summary cards -->
      <div class="budget-summary" *ngFor="let item of this.budget">
        <div class="summary-card">
          <div class="summary-icon transport">
            <ion-icon name="{{item.iconoCategoria}}"></ion-icon>
          </div>
          <div class="summary-details">
            <span class="summary-category">{{item.categoryId}}</span>
            <span class="summary-amount">{{item.montoFormateado}}</span>
            <!-- Se agregar√° luego esta funcion -->
            <!-- <div class="progress-bar">
              <div class="progress" style="width: 40%;"></div>
            </div>
            <span class="summary-status">40% usado</span> -->
          </div>
        </div>
      </div>
      
      <!-- Budget tips -->
      <div class="tips-section">
        <h3 class="tips-title">Consejos para mejorar tus finanzas</h3>
        <div class="tip-card">
          <ion-icon name="bulb-outline"></ion-icon>
          <p>Considera ajustar tu presupuesto de entretenimiento para ahorrar m√°s este mes.</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal overlay -->
  <div class="modal-overlay" *ngIf="isModalOpen">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">Crear Nuevo Presupuesto</h2>
        <button class="close-button" (click)="closeModal()">
          <ion-icon name="close-outline"></ion-icon>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Categor√≠a del presupuesto</label>
          <select
            [(ngModel)]="categoriaSeleccionada"
            class="form-select">
            <option value="" selected disabled>Seleccione una categor√≠a</option>
            <option
              *ngFor="let categoria of categoriasGasto"
              [value]="categoria.nombre">
              {{ categoria.nombre }}
            </option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">Ingresa la cantidad de tu presupuesto</label>
          <ion-item class="amount-input">
            <ion-input type="number" placeholder="$19.990" [(ngModel)]="amount"></ion-input>
          </ion-item>
        </div>
        
        <div class="modal-actions">
          <button class="action-button primary-button" (click)="saveBudget()">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
            </svg>
            Guardar Transacci√≥n
          </button>
          <button class="action-button secondary-button" (click)="closeModal()">
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>
</ion-content>