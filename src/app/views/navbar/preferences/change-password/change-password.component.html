<ion-content class="ion-padding">
<div class="p-4 space-y-6 max-w-md mx-auto">
<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/preferences"></ion-back-button>
    </ion-buttons>
    <ion-title>Cambiar contraseña</ion-title>
  </ion-toolbar>
</ion-header>

  <!-- Campo de contraseña -->
      <div
      class="w-full rounded-lg shadow-xl md:mt-0 sm:max-w-md xl:p-0 bg-white border border-purple-300"
    >
      <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
        <h1
          class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl"
        >
          Cambia tu contraseña
        </h1>
        <form class="space-y-4 md:space-y-6" [formGroup]="form" (ngSubmit)="submit()">
        <div>
          <label for="password" class="block mb-2 text-sm font-medium text-gray-700">Antigua Contraseña</label>
          <div class="flex">
            <span class="inline-flex items-center justify-center px-3 border border-e-0 border-purple-300 rounded-s-md bg-purple-500 text-white">
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 1a5 5 0 0 0-5 5v4H6a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V11a1 1 0 0 0-1-1h-1V6a5 5 0 0 0-5-5Zm-3 5a3 3 0 1 1 6 0v4H9V6Zm0 6h6v9H9v-9Z"/>
              </svg>
            </span>         
            <input
              type="password"
              name="oldPassword"
              id="oldPassword"
              style="color: black !important;"
              placeholder="••••••••"
              class="rounded-none rounded-e-lg bg-gray-50 border border-purple-300 text-black focus:ring-purple-500 focus:border-purple-500 block flex-1 min-w-0 w-full text-sm p-2.5"
              required=""
              formControlName="oldPassword"
            />
          </div>
          @if(isRequired('oldPassword')){
            <small class="text-red-500">Este campo es requerido</small>
          }
        </div>

        <div>
          <label for="confirmPassword" class="block mb-1 text-sm font-medium text-gray-700">Nueva contraseña</label>
          <div class="flex">
            <span class="inline-flex items-center justify-center px-3 border border-e-0 border-purple-300 rounded-s-md bg-purple-500 text-white">
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 1a5 5 0 0 0-5 5v4H6a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V11a1 1 0 0 0-1-1h-1V6a5 5 0 0 0-5-5Zm-3 5a3 3 0 1 1 6 0v4H9V6Zm0 6h6v9H9v-9Z"/>
              </svg>
            </span>         
            <input
              type="password"
              name="newPassword"
              id="newPassword"
              style="color: black !important;"
              placeholder="••••••••"
              class="rounded-none rounded-e-lg bg-gray-50 border border-purple-300 text-black focus:ring-purple-500 focus:border-purple-500 block flex-1 min-w-0 w-full text-sm p-2.5"
              required=""
              formControlName="newPassword"
            />
          </div>
          @if(isRequired('newPassword')){
            <small class="text-red-500">Este campo es requerido</small>
          }
        </div>
        
        <!-- Campo para confirmar contraseña -->
        <div>
          <label for="confirmPassword" class="block mb-1 text-sm font-medium text-gray-700">Confirma tu  nueva contraseña</label>
          <div class="flex">
            <span class="inline-flex items-center justify-center px-3 border border-e-0 border-purple-300 rounded-s-md bg-purple-500 text-white">
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 1a5 5 0 0 0-5 5v4H6a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V11a1 1 0 0 0-1-1h-1V6a5 5 0 0 0-5-5Zm-3 5a3 3 0 1 1 6 0v4H9V6Zm0 6h6v9H9v-9Z"/>
              </svg>
            </span>         
            <input
              type="password"
              name="confirmNewPass"
              id="confirmNewPass"
              style="color: black !important;"
              placeholder="••••••••"
              class="rounded-none rounded-e-lg bg-gray-50 border border-purple-300 text-black focus:ring-purple-500 focus:border-purple-500 block flex-1 min-w-0 w-full text-sm p-2.5"
              required=""
              formControlName="confirmNewPass"
            />
          </div>
          @if(isRequired('confirmNewPass')){
            <small class="text-red-500">Este campo es requerido</small>
          }
        </div>      
      <ion-button class="save-button" type="submit" fill="outline" color="tertiary" expand="block" >Guardar cambios</ion-button>
      </form>
       <div class="loading-container" *ngIf="isLoading">
        <div class="loading-spinner"></div>
        <p class="loading-text">Actualizando contraseña...</p>
      </div>
    </div>
    </div>
  </div>
</ion-content>
